<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>CHI(œá)-Files</title>
<link>https://chichacha.github.io/chi-files/#category=r</link>
<atom:link href="https://chichacha.github.io/chi-files/index-r.xml" rel="self" type="application/rss+xml"/>
<description>Exploring the irrational, the visual, and the unexpected</description>
<generator>quarto-1.6.39</generator>
<lastBuildDate>Sun, 29 Dec 2024 08:00:00 GMT</lastBuildDate>
<item>
  <title>Visualizing 445 Calendar in R</title>
  <dc:creator>Chisato </dc:creator>
  <link>https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator.html</link>
  <description><![CDATA[ 





<section id="have-you-heard-of-the-4-4-5-calendar" class="level3">
<h3 class="anchored" data-anchor-id="have-you-heard-of-the-4-4-5-calendar">Have You Heard of the 4-4-5 Calendar? üìÜ</h3>
<p>If you‚Äôve worked in retail, you might already know that time isn‚Äôt always measured in standard months. Enter the 4-4-5 calendar: a reporting tool that divides a year into 12 periods, each organized into quarters of 4, 4, and 5 weeks (i.e.&nbsp;13 weeks in each quarter). This structure ensures comparability across years by standardizing the length of each reporting period. (But yes, this isn‚Äôt perfect either‚Äîevery 5-6 years, this produces a year with 53 weeks.)</p>
</section>
<section id="why-use-a-4-4-5-calendar" class="level3">
<h3 class="anchored" data-anchor-id="why-use-a-4-4-5-calendar">Why Use a 4-4-5 Calendar?</h3>
<p>Standard Gregorian calendars often lead to reporting headachesü§ï, especially when months have varying lengths or different counts of weekends. The 4-4-5 calendar solves this by:</p>
<ul>
<li>Aligning periods to weeks, making year-over-year comparisons simpler.</li>
<li>Standardizing reporting cycles, especially for weekly-driven industries like retail.</li>
<li>Providing flexibility with alternative formats, such as the 4-5-4 calendar, for specific business needs.</li>
</ul>
<p>There‚Äôs also a sibling versionüëßüèª, the 4-5-4 calendar, which I personally prefer because it ensures that American Thanksgiving ü¶ÉüéÅ always falls within Period 11. In contrast, the 4-4-5 calendar may place Thanksgiving in Period 11 or 12, depending on the year.</p>
</section>
<section id="building-a-custom-4-4-5-calendar-in-r" class="level3">
<h3 class="anchored" data-anchor-id="building-a-custom-4-4-5-calendar-in-r">Building a Custom 4-4-5 Calendar in R</h3>
<p>To create a reusable tool, I developed the create_calendar function. This function takes a year and a calendar type (‚Äú445‚Äù or ‚Äú454‚Äù) and returns a detailed tibble with dates, weeks, periods, and quarters. Function takes the year, and returns calendar as data frame.</p>
<div class="cell">
<details class="code-fold">
<summary>Create Calendar Function</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">create_calendar <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"445"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col_pal =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, ...) {</span>
<span id="cb1-2">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(col_pal)) {</span>
<span id="cb1-3">    col_pal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ggthemes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tableau_color_pal</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hue Circle"</span>)(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>)]</span>
<span id="cb1-4">  }</span>
<span id="cb1-5">  </span>
<span id="cb1-6">  cal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dt =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq.Date</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(year<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-12-01"</span>)), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(year, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-12-31"</span>)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"day"</span>)</span>
<span id="cb1-8">  )</span>
<span id="cb1-9">  </span>
<span id="cb1-10">  wpq <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">switch</span>(calendar_type,</span>
<span id="cb1-11">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"445"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-12">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">wk =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">53</span>,</span>
<span id="cb1-13">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))),</span>
<span id="cb1-14">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">q =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)))</span>
<span id="cb1-15">                ),</span>
<span id="cb1-16">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"454"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-17">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">wk =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">53</span>,</span>
<span id="cb1-18">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))),</span>
<span id="cb1-19">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">q =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)))</span>
<span id="cb1-20">                ),</span>
<span id="cb1-21">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stop</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Invalid calendar type. Choose '445' or '454'."</span>)</span>
<span id="cb1-22">  )</span>
<span id="cb1-23">  </span>
<span id="cb1-24">  cal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb1-26">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yr =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">isoyear</span>(dt),</span>
<span id="cb1-27">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">wk =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">isoweek</span>(dt),</span>
<span id="cb1-28">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">wday =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wday</span>(dt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">week_start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getOption</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lubridate.week.start"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb1-29">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(wpq, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wk"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color_num=</span>wk <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> q) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color_wk =</span> colourvalues<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">color_values</span>(color_num, </span>
<span id="cb1-33">                                                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette=</span>farver<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">decode_colour</span>(col_pal))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-34">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(yr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>year)</span>
<span id="cb1-35">  </span>
<span id="cb1-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(cal)</span>
<span id="cb1-37">}</span></code></pre></div>
</details>
</div>
</section>
<section id="making-the-visual-calendar" class="level3">
<h3 class="anchored" data-anchor-id="making-the-visual-calendar">Making the Visual Calendar</h3>
<p>Using <code>ggplot2</code>, we can create a visual representation of the calendar. The plot organizes weeks within periods and highlights each period in a grid layout.</p>
<p>I‚Äôve turned this ggplot2 as another function.</p>
<div class="cell">
<details class="code-fold">
<summary>Plot Calendar Function</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">plot_calendar <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(cal) {</span>
<span id="cb2-2">  cal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>wday,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>color_num)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">I</span>(color_wk)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffffffde"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">day</span>(dt),</span>
<span id="cb2-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">I</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(dt)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>p,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffffff"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e3e3e3"</span>))),  </span>
<span id="cb2-7">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Condensed"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"W"</span>,wk),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">I</span>(color_wk),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb2-9">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Condensed"</span>, </span>
<span id="cb2-10">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> . <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(wk,color_num,color_wk,p,q))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_blank</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_reverse</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(.,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>L,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>L)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>p,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-15">    cowplot<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">font_family=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Condensed"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">line_size=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb2-17">}</span></code></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true">2025 - 445 üóìÔ∏è</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false">2025 - 454 üóìÔ∏è</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false">2024 - 445 üóìÔ∏è</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" aria-controls="tabset-1-4" aria-selected="false">2024 - 445 üóìÔ∏è</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_calendar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"445"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_calendar</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_calendar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"454"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_calendar</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_calendar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"445"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_calendar</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_calendar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">calendar_type=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"454"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_calendar</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>While the 4-4-5 calendar does simplifies retail reporting, timekeeping isn‚Äôt always that straightforward. I‚Äôve taken things up a notch and explore how sunlight, time zones, and Daylight Saving Time adds extra complexity.</p>
</section>
<section id="up-the-complication-of-timekeeping-by-a-few-notches" class="level3">
<h3 class="anchored" data-anchor-id="up-the-complication-of-timekeeping-by-a-few-notches">Up the Complication of Timekeeping by a Few Notches</h3>
<p>At first glance, keeping track of time seems simple üí°‚Äîbut dig deeper, and it‚Äôs anything but. Add time zones, daylight saving time (DST), and patterns of sunlight to the mix, and you‚Äôve just cranked the complexity up to expert mode. üòÖ</p>
<p>I don‚Äôt think I‚Äôve solved this puzzle perfectly yet, but here‚Äôs my attempt using R‚Äôs <a href="https://cran.r-project.org/web/packages/suncalc/index.html" title="Get sun position, sunlight phases (times for sunrise, sunset, dusk, etc.), moon position and lunar phase for the given location and time.">suncalc</a> package to visualize sunlight data alongside our trusty 4-4-5 calendar.</p>
<div class="cell">
<details class="code-fold">
<summary>Sunlight Length Plot Creation</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## install.package if you don't have it installed.  </span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(suncalc)</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Predefined city list with lat/lon &amp; timezones.  </span></span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># To see full listing of available timezones, OlsonNames()</span></span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">### Creation of cities tibble</span></span>
<span id="cb7-8">cities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb7-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">city =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb7-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vancouver"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Toronto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New York"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chicago"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Los Angeles"</span>, </span>
<span id="cb7-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tokyo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Paris"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"London"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Munich"</span>,</span>
<span id="cb7-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sydney"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mumbai"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cape Town"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Moscow"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"S√£o Paulo"</span>,</span>
<span id="cb7-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denpasar"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lima"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dubai"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bangkok"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Istanbul"</span>,</span>
<span id="cb7-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reykjavik"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Troms√∏"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Buenos Aires"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cairo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Anchorage"</span></span>
<span id="cb7-15">  ),</span>
<span id="cb7-16">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb7-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Canada"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Canada"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United States"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United States"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United States"</span>,</span>
<span id="cb7-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Japan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"France"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United Kingdom"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Germany"</span>,</span>
<span id="cb7-19">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Australia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"India"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"South Africa"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Russia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>,</span>
<span id="cb7-20">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Indonesia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peru"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United Arab Emirates"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Thailand"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Turkey"</span>,</span>
<span id="cb7-21">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Iceland"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Norway"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Argentina"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Egypt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United States"</span></span>
<span id="cb7-22">  ),</span>
<span id="cb7-23">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lat =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb7-24">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">49.246292</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">43.65107</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">40.712776</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">41.878113</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">34.052235</span>, </span>
<span id="cb7-25">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">35.689487</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">48.856613</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">51.507222</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">48.135124</span>,</span>
<span id="cb7-26">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">33.868820</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">19.076090</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">33.924870</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">55.755825</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">23.550520</span>,</span>
<span id="cb7-27">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.650000</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">12.046374</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">25.276987</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">13.756331</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">41.008240</span>,</span>
<span id="cb7-28">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">64.1466</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">69.6496</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">34.603722</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">30.044420</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">61.218056</span></span>
<span id="cb7-29">  ),</span>
<span id="cb7-30">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lon =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb7-31">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">123.116226</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">79.347015</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">74.005974</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">87.629799</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">118.243683</span>, </span>
<span id="cb7-32">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">139.691711</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.352222</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1275</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">11.581981</span>,</span>
<span id="cb7-33">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">151.209290</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">72.877426</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.424055</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">37.617298</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">46.633308</span>,</span>
<span id="cb7-34">    <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">115.216667</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">77.042793</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">55.296249</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">100.501762</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">28.978359</span>,</span>
<span id="cb7-35">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">21.9426</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.9560</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">58.3816</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">31.2357</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">149.900278</span></span>
<span id="cb7-36">  ),</span>
<span id="cb7-37">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tz =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb7-38">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Vancouver"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Toronto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/New_York"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Chicago"</span>, </span>
<span id="cb7-39">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Los_Angeles"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia/Tokyo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe/Paris"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe/London"</span>, </span>
<span id="cb7-40">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe/Berlin"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Australia/Sydney"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia/Kolkata"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Africa/Johannesburg"</span>, </span>
<span id="cb7-41">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe/Moscow"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Sao_Paulo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia/Makassar"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Lima"</span>, </span>
<span id="cb7-42">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia/Dubai"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia/Bangkok"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe/Istanbul"</span>,</span>
<span id="cb7-43">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atlantic/Reykjavik"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe/Oslo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Argentina/Buenos_Aires"</span>, </span>
<span id="cb7-44">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Africa/Cairo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"America/Anchorage"</span></span>
<span id="cb7-45">  )</span>
<span id="cb7-46">)</span>
<span id="cb7-47"></span>
<span id="cb7-48"></span>
<span id="cb7-49"></span>
<span id="cb7-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generalized function </span></span>
<span id="cb7-51">visualize_sunlight <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(city_name, year) {</span>
<span id="cb7-52">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Find city details</span></span>
<span id="cb7-53">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#city_name &lt;- ("Vancouver, BC")</span></span>
<span id="cb7-54">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#year &lt;- 2025</span></span>
<span id="cb7-55">  city <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> cities <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(city <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> city_name)</span>
<span id="cb7-56">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(city) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stop</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"City not found in predefined list."</span>)</span>
<span id="cb7-57">  </span>
<span id="cb7-58">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get sunlight data for the year</span></span>
<span id="cb7-59">  </span>
<span id="cb7-60">  sunlight_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_calendar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-61">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(dt) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-62">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_dfr</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getSunlightTimes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date =</span> ., <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lat =</span> city<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>lat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lon =</span> city<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>lon, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tz =</span> city<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>tz)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-63">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>()  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-64">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb7-65">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">daylight_dur =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.duration</span>(sunrise <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%--%</span> sunset),</span>
<span id="cb7-66">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">where</span>(is.POSIXct), </span>
<span id="cb7-67">             <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">time =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hms</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd_hms</span>(.), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%H:%M:%S"</span>))))</span>
<span id="cb7-68">    )</span>
<span id="cb7-69">  </span>
<span id="cb7-70">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add calendar columns</span></span>
<span id="cb7-71">  sunlight_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sunlight_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bind_cols</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_calendar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> year))</span>
<span id="cb7-72">  </span>
<span id="cb7-73">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Summarise by Period</span></span>
<span id="cb7-74">  p_summary <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sunlight_data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-75">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(p) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-76">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(</span>
<span id="cb7-77">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(dt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>color_num), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(.), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(.))),</span>
<span id="cb7-78">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avg_dur =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(daylight_dur)</span>
<span id="cb7-79">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-80">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb7-81">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avg_dur_seconds =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(avg_dur),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Convert duration to seconds</span></span>
<span id="cb7-82">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avg_dur_hours =</span> avg_dur_seconds <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Convert seconds to hours</span></span>
<span id="cb7-83">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">descr =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(</span>
<span id="cb7-84">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"P{p}</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">{format(dt_min, '%Y %b %e')} - {format(dt_max, '%Y %b %e')}</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb7-85">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Avg Daylight: {round(avg_dur_hours, 2)} hours"</span></span>
<span id="cb7-86">    )</span>
<span id="cb7-87">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb7-88">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">relocate</span>(p, descr)</span>
<span id="cb7-89">  </span>
<span id="cb7-90">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Detect DST start and end</span></span>
<span id="cb7-91">  dst_info <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb7-92">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date =</span> sunlight_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>date,</span>
<span id="cb7-93">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">is_dst =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with_tz</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd_hms</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(date, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"00:00:00"</span>)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tzone =</span> city<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>tz) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dst</span>()</span>
<span id="cb7-94">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(is_dst) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-95">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(date)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>date<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(date)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>date)</span>
<span id="cb7-96">  </span>
<span id="cb7-97">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Dynamically create subtitle</span></span>
<span id="cb7-98">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(dst_info) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) {</span>
<span id="cb7-99">    subtitle <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"This location does not observe Daylight Saving Time (DST)."</span></span>
<span id="cb7-100">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb7-101">    dst_start <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(city<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>lat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(dst_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>date),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(dst_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>date))</span>
<span id="cb7-102">    dst_end <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(city<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>lat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(dst_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>date),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(dst_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>date))</span>
<span id="cb7-103">    subtitle <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DST Starts: {format(dst_start, '%b %e %a (Week %V)')} | DST Ends: {format(dst_end, '%b %e %a (Week %V)')}"</span>)</span>
<span id="cb7-104">  }</span>
<span id="cb7-105">  </span>
<span id="cb7-106">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate the plot</span></span>
<span id="cb7-107">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sunlight_data, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(color_num) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(wday) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-108">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_ribbon</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> dawn_time, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> dusk_time, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">I</span>(colorspace<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lighten</span>(color_wk, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>)))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-109">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_ribbon</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymin =</span> sunrise_time, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ymax =</span> sunset_time, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">I</span>(color_wk))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-110">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> solarNoon_time), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-111">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-112">    cowplot<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal_vgrid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">font_family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Condensed"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-113">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(sunlight_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sunrise_time)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-114">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(sunlight_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sunrise_time)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-115">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(sunlight_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sunset_time)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-116">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(sunlight_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>sunset_time)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-117">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb7-118">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> hms<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_hms</span>(.),</span>
<span id="cb7-119">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>), <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hourly breaks</span></span>
<span id="cb7-120">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span>
<span id="cb7-121">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-122">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb7-123">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb7-124">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb7-125">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sunlight Duration for {city_name} {city$country} ({year}) - 445 Calendar"</span>),</span>
<span id="cb7-126">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> subtitle</span>
<span id="cb7-127">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-128">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_label</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>color_num_min, </span>
<span id="cb7-129">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>avg_dur_seconds, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"P"</span>,p,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">avg</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(avg_dur_hours,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">hrs"</span>)),</span>
<span id="cb7-130">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> p_summary, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Condensed"</span>, </span>
<span id="cb7-131">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lineheight=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffffff50"</span>)</span>
<span id="cb7-132">}</span></code></pre></div>
</details>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" aria-controls="tabset-2-1" aria-selected="true">Vancouver üá®üá¶</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" aria-controls="tabset-2-2" aria-selected="false">New York üá∫üá∏</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" aria-controls="tabset-2-3" aria-selected="false">Munich üá©üá™</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" aria-controls="tabset-2-4" aria-selected="false">Troms√∏ üá≥üá¥</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" aria-controls="tabset-2-5" aria-selected="false">Sydney üá¶üá∫</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" aria-controls="tabset-2-6" aria-selected="false">Tokyo üáØüáµ</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" aria-controls="tabset-2-7" aria-selected="false">Denpasar üáÆüá©</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-8" aria-controls="tabset-2-8" aria-selected="false">Cairo üá™üá¨</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" aria-labelledby="tabset-2-1-tab">
<p>Vancouver üá®üá¶üå≤‚õ∞Ô∏è Daylight Saving Time: DST is observed from March to November. Summer days are long (about 16 hours) while winter days are short (about 8 hours). üë©üèª‚Äçüè´ There are more than twice as many daylight hours on the summer solstice than on the winter one.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vancouver"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" aria-labelledby="tabset-2-2-tab">
<p>New York üá∫üá∏üóΩüèô Daylight Saving Time: DST is observed from March to November, just like Vancouver. About 15 hours in the summer and about 9.4 hours in the winter, New York‚Äôs patterns are slightly less pronounced than Vancouver‚Äôs but still notable.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New York"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" aria-labelledby="tabset-2-3-tab">
<p>Munich üá©üá™üç∫üè∞ Daylight Saving Time: Commences in late March and concludes in late October. Sunlight: Summer days last approximately 16 hours, while winter days last approximately 8.5 hours.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Munich"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" aria-labelledby="tabset-2-4-tab">
<p>Troms√∏ üá≥üá¥‚ùÑÔ∏èüåå **Troms√∏‚Äôs graph below is broken due to the sun setting after midnight during the summer (a phenomenon called the midnight sun), and I didn‚Äôt think through on these edge cases while creating ggplot2!</p>
<p>Daylight Saving: Starts last Sunday in March, ends last Sunday in October in Norway. That said, Troms√∏ (and other places in the Arctic Circle) experience midnight sun and polar night - So DST has no actual practical effect??!</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Troms√∏"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-5" class="tab-pane" aria-labelledby="tabset-2-5-tab">
<p>Sydney üá¶üá∫üåäüê® Daylight Saving: Starts first Sunday in October, ends first Sunday in April as seen on the glitch on visual below. I didn‚Äôt quite get the extraction of DST accurately in my function, so subtitle still isn‚Äôt accurate‚Ä¶ üòÖ üôÄAnother interesting thing I learned is that Not all states observe DST in Australia üá¶üá∫! This creates a patchwork of timezones during the summer in Australia!</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sydney"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-6" class="tab-pane" aria-labelledby="tabset-2-6-tab">
<p>Tokyo üáØüáµüèôÔ∏èüå∏ Daylight Saving: Japan doesn‚Äôt observe DST (Since 1952). Most of Japan experiences consistent sunrise and sunset times throughout the year, making DST less beneficial.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tokyo"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-7" class="tab-pane" aria-labelledby="tabset-2-7-tab">
<p>Denpasar üáÆüá©üå¥üåä Like the rest of Indonesia, Bali does not observe DST. The daylight time remains constant throughout the year due to its tropical, equatorial location thoughout the year. So there‚Äôs really no need for DST.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denpasar"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-8" class="tab-pane" aria-labelledby="tabset-2-8-tab">
<p>Cairo üá™üá¨üïåüê™ Daylight Saving: Unlike Canada or US, DST transition occurs on Friday in Late April and Thursdays in Late October, instead of more typical Sunday.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">visualize_sunlight</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cairo"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2025</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="where-are-these-cities" class="level3">
<h3 class="anchored" data-anchor-id="where-are-these-cities">Where are these cities?</h3>
<p>Here‚Äôs a map of the cities I‚Äôve picked in above.</p>
<div class="cell">
<details class="code-fold">
<summary>Interactive Leaflet Map Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(leaflet)</span>
<span id="cb16-2"></span>
<span id="cb16-3">cities <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb16-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(city <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tokyo"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denpasar"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vancouver"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New York"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Munich"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sydney"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cairo"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Troms√∏"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb16-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">leaflet</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb16-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addProviderTiles</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CartoDB.DarkMatter"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb16-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">addMarkers</span>(</span>
<span id="cb16-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>city,</span>
<span id="cb16-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">popup =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(</span>
<span id="cb16-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;b&gt;"</span>, city, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", "</span>,country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;/b&gt;&lt;br&gt;"</span>,</span>
<span id="cb16-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lat: "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(lat, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br&gt;"</span>,</span>
<span id="cb16-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lon: "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(lon, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb16-13">  ), htmltools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>HTML</span>
<span id="cb16-14">  ),</span>
<span id="cb16-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labelOptions =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labelOptions</span>(</span>
<span id="cb16-16">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font-weight"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb16-17">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">direction =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"auto"</span>,</span>
<span id="cb16-18">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">textsize =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"12px"</span>,</span>
<span id="cb16-19">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">noHide =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb16-20">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">textOnly =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb16-21">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sticky =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb16-22">    )</span>
<span id="cb16-23">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-9e020dab2e0460a12d49" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9e020dab2e0460a12d49">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.DarkMatter",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[49.246292,40.712776,35.689487,48.135124,-33.86882,-8.65,69.64960000000001,30.04442],[-123.116226,-74.00597399999999,139.691711,11.581981,151.20929,115.216667,18.956,31.2357],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<b>Vancouver, Canada<\/b><br>Lat: 49.25<br>Lon: -123.12","<b>New York, United States<\/b><br>Lat: 40.71<br>Lon: -74.01","<b>Tokyo, Japan<\/b><br>Lat: 35.69<br>Lon: 139.69","<b>Munich, Germany<\/b><br>Lat: 48.14<br>Lon: 11.58","<b>Sydney, Australia<\/b><br>Lat: -33.87<br>Lon: 151.21","<b>Denpasar, Indonesia<\/b><br>Lat: -8.65<br>Lon: 115.22","<b>Troms√∏, Norway<\/b><br>Lat: 69.65<br>Lon: 18.96","<b>Cairo, Egypt<\/b><br>Lat: 30.04<br>Lon: 31.24"],null,null,null,["Vancouver","New York","Tokyo","Munich","Sydney","Denpasar","Troms√∏","Cairo"],{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"12px","textOnly":true,"style":{"font-weight":"bold","color":"white"},"className":"","sticky":true},null]}],"limits":{"lat":[-33.86882,69.64960000000001],"lng":[-123.116226,151.20929]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="timekeeping-a-rabbit-hole-worth-falling-into" class="level3">
<h3 class="anchored" data-anchor-id="timekeeping-a-rabbit-hole-worth-falling-into">Timekeeping: A Rabbit Hole Worth Falling Into üê∞üï≥Ô∏è</h3>
<p>What started as a simple exploration of the 4-4-5 calendar turned into a wild ride through the quirks of time‚Äîdaylight saving oddities, cultural twists, and even the midnight sun.</p>
<p>I love these ‚Äúuseless trivias,‚Äù but they‚Äôre a reminder that time isn‚Äôt just ticking numbers on a clock‚Äîit‚Äôs shaped by geography, culture, and sometimes even political drama. This was a fun wake-up call (pun intended) that time is more complex, and entertaining? than we think!!</p>


</section>

 ]]></description>
  <category>r</category>
  <category>ggplot</category>
  <category>calendar</category>
  <category>leaflet</category>
  <category>suncalc</category>
  <guid>https://chichacha.github.io/chi-files/posts/2024_12/calendar_generator.html</guid>
  <pubDate>Sun, 29 Dec 2024 08:00:00 GMT</pubDate>
</item>
<item>
  <title>Geometic Art Generator with Shiny</title>
  <dc:creator>Chisato </dc:creator>
  <link>https://chichacha.github.io/chi-files/posts/2024_12/geometric_pattern_ggplot.html</link>
  <description><![CDATA[ 





<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">üåü Introduction</h3>
<p><code>ggplot2</code>‚Äîthe trusty workhorse of R. It‚Äôs definitely have been the go-to package for creating stunning visualizations for years. And it‚Äôs not going anywhere anytime soon. üéâ</p>
<p>But I‚Äôve always wondered: What if my ggplot2 creations could come to life? What if I could tweak a slider and instantly see my charts morph? Enter Shiny‚Äîa magical tool to make R interactive.</p>
<p>I procrastinated for years. I finally jumped in. Thanks to tools like <a href="https://www.shinyapps.io/">shinyapps.io</a> and <a href="https://rstudio.github.io/shinythemes/">shinythemes</a>, the process was much smoother than I imagined. These tools took away the stress of deployment and styling, making Shiny approachable even for a beginner like me.</p>
</section>
<section id="geometric-generative-art---shiny-app-experimentation" class="level3">
<h3 class="anchored" data-anchor-id="geometric-generative-art---shiny-app-experimentation">üé® Geometric Generative Art - Shiny App Experimentation</h3>
<div class="cell" data-layout-align="default">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb1-1">graph LR</span>
<span id="cb1-2">    A[Static ggplot2 Plot] --&gt; B[Dynamic Shiny App]</span>
<span id="cb1-3">    B --&gt; C[Published on shinyapps.io]</span>
<span id="cb1-4">    C --&gt; D[Embedded in Blog Post]</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Static ggplot2 Plot] --&gt; B[Dynamic Shiny App]
    B --&gt; C[Published on shinyapps.io]
    C --&gt; D[Embedded in Blog Post]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>To dip my toes into Shiny, I created an app that lets you experiment with geometric generative art. Adjust sliders to tweak parameters like rotation, scale, and color, and transformation on coordinate system to see how patterns come to life in real time!</p>
<div class="callout callout-style-simple callout-warning no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>This app is more of a personal playground for exploring patterns than a polished product. Feel free to experiment!</p>
</div>
</div>
</div>
<iframe src="https://chichacha.shinyapps.io/geometric_generative_art/" width="100%" height="1000px" style="border: none; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
</iframe>
</section>
<section id="from-interactivity-to-animation" class="level3">
<h3 class="anchored" data-anchor-id="from-interactivity-to-animation">üé• From Interactivity to Animation</h3>
<p>As I played with the app, I wanted to see how parameter changes would look as a sequence. I automated the process to generate frames and stitched them into this animated gif:</p>
<p><img src="https://imgur.com/I4ZgOOO.png" class="img-fluid"></p>
<p><img src="https://imgur.com/InH8xtj.png" class="img-fluid"></p>
</section>
<section id="key-takeaways" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaways">‚úçÔ∏è Key Takeaways</h3>
<p><a href="https://shiny.posit.co/">Shiny</a> brings interactivity to static ggplot2 visualizations‚Äîperfect for both data exploration and presentation.</p>
<p>Tools like <code>shinyapps.io</code> and <code>shinythemes</code> make the process approachable and stylish! I‚Äôve also started exploring newer options like <a href="https://rstudio.github.io/bslib/"><code>bslib</code></a> and <a href="https://rstudio.github.io/thematic/"><code>thematic</code></a>, which seem promising for even more customization and polished visuals. ‚ú®</p>
<p>This one‚Äôs probably obvious to seasoned Shiny users. But for me, it was a total lightbulb üí° moment. Decoupling Shiny app development from the blog itself made everything so much easier, and I wish I‚Äôd known this sooner!</p>
<p>Start with something fun to learn Shiny‚Äîbecause jumping straight into building a business dashboard feels like a much higher hurdle. Experimenting with something playful, like geometric art, makes the learning curve way less intimidating.</p>


</section>

 ]]></description>
  <category>r</category>
  <category>ggplot</category>
  <category>shiny</category>
  <guid>https://chichacha.github.io/chi-files/posts/2024_12/geometric_pattern_ggplot.html</guid>
  <pubDate>Thu, 26 Dec 2024 08:00:00 GMT</pubDate>
  <media:content url="https://chichacha.github.io/chi-files/posts/2024_12/pattern_angle_3_32.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>Fish-Eye Lens Effect with ggplot2</title>
  <dc:creator>Chisato </dc:creator>
  <link>https://chichacha.github.io/chi-files/posts/2024_12/</link>
  <description><![CDATA[ 





<section id="fascination-with-warping" class="level3">
<h3 class="anchored" data-anchor-id="fascination-with-warping">Fascination with ‚ÄúWarping‚Äù ‚Ä¶</h3>
<p>The ‚Äúfish-eye‚Äù lens has always fascinated me. It was my gateway into photography‚Äîits quirky, distorted charm never failed to add whimsy to my shots. Some of my favourite memories are capturing our furry friendsüê∂üêΩüêÑ.</p>
<p>Recently, I started wondering why not bring that same fish-eyeüêüüëÅÔ∏è magic into my data visualizations. While it may not suit business dashboards, it‚Äôs perfect for artistic visualizations. With ggplot2‚Äôs <a href="https://ggplot2.tidyverse.org/reference/coord_trans.html"><code>coord_trans()</code></a> and its <a href="https://scales.r-lib.org/reference/log_trans.html"><code>"pseudo_log"</code></a> transformation as inspiration, I decied to push the boundaries and create my first custom transformation.</p>
</section>
<section id="digression-the-seigaha-motif-as-a-canvas" class="level3">
<h3 class="anchored" data-anchor-id="digression-the-seigaha-motif-as-a-canvas">Digression : The Seigaha Motif as a Canvas üé®</h3>
<p>To test this idea, I used a Seigaha motif I created the other day. It‚Äôs a geometric design with overlapping circles that naturally lends itself to experimentation. I introduced randomness to the colors using irrational numbers as denominators, leveraging R‚Äôs modulo operation for real numbers. Just another attempt at creating ‚Äúpseudo-randomness‚Äù in the design.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ax%20%5Cmod%20y%20=%20x%20-%20%5Ctext%7Bfloor%7D%5Cleft(%5Cfrac%7Bx%7D%7By%7D%5Cright)%20%5Ctimes%20y%0A"></p>
<section id="famous-irrational-numbers-in-math" class="level4">
<h4 class="anchored" data-anchor-id="famous-irrational-numbers-in-math">Famous ‚ÄúIrrational‚Äù Numbers in Math</h4>
<section id="golden-ratio" class="level5">
<h5 class="anchored" data-anchor-id="golden-ratio">Golden Ratio</h5>
<p>The <a href="https://en.wikipedia.org/wiki/Golden_ratio">Golden Ratio</a> is often represented by the Greek letter <img src="https://latex.codecogs.com/png.latex?%5Cphi"> and is defined as: <img src="https://latex.codecogs.com/png.latex?%0A%5Cphi%20=%20%5Cfrac%7B1%20+%20%5Csqrt%7B5%7D%7D%7B2%7D%0A"></p>
</section>
<section id="silver-ratio" class="level5">
<h5 class="anchored" data-anchor-id="silver-ratio">Silver Ratio</h5>
<p>The lesser-known <a href="https://mathworld.wolfram.com/SilverRatio.html">Silver Ratio</a>, represented by <img src="https://latex.codecogs.com/png.latex?%5Cdelta_s">, is defined as: <img src="https://latex.codecogs.com/png.latex?%0A%5Cdelta_s%20=%201%20+%20%5Csqrt%7B2%7D%0A"></p>
</section>
<section id="eulers-number" class="level5">
<h5 class="anchored" data-anchor-id="eulers-number">Euler‚Äôs Number</h5>
<p>Euler‚Äôs number, represented by <img src="https://latex.codecogs.com/png.latex?e">, is a fundamental constant in mathematics: <img src="https://latex.codecogs.com/png.latex?%0Ae%20=%20%5Cexp(1)%0A"> It is approximately <img src="https://latex.codecogs.com/png.latex?e%20%5Capprox%202.718">.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Easily Install and Load the 'Tidyverse' </span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggforce) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Accelerating 'ggplot2'   </span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cowplot) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Streamlined Plot Theme and Plot Annotations for 'ggplot2'  </span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Easily Create Presentation-Ready Display Tables </span></span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">### just declaring the colour palette here</span></span>
<span id="cb1-7">col10 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_split</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"001219-005f73-0a9396-94d2bd-e9d8a6-ee9b00-ca6702-bb3e03-ae2012-9b2226"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb1-8">col10_pal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#"</span>,col10 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>())</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">### Creating data frame that is basis of layout</span></span>
<span id="cb1-11">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), </span>
<span id="cb1-12">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(y,x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y_odd=</span>(y<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">idx=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(y_odd,x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,x))</span>
<span id="cb1-17"></span>
<span id="cb1-18"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">### For each grid location, I want 6 concentric circles</span></span>
<span id="cb1-19">r_values <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span>
<span id="cb1-20"></span>
<span id="cb1-21"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">### Just defining some "Irregular Numbers" that I can use with Modulo </span></span>
<span id="cb1-22">gr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## the golden ratio </span></span>
<span id="cb1-23">sr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##. lesser known silver ratio</span></span>
<span id="cb1-24">euler_num <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb1-25"></span>
<span id="cb1-26">df_long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r_values) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb1-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r_var=</span>r<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(idx<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span>sr)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## I'm experimenting here with modulo with pi </span></span></code></pre></div>
</details>
</div>
</section>
</section>
</section>
<section id="cartesian-coordinates-the-baseline" class="level3">
<h3 class="anchored" data-anchor-id="cartesian-coordinates-the-baseline">Cartesian Coordinates: The Baseline</h3>
<p>Here‚Äôs the unaltered design using <code>coord_fixed</code>, maintaining regular Cartesian coordinates.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>y,idx, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(r)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_circle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x0=</span>x,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y0=</span>y,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>r_var),</span>
<span id="cb2-5">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fffff3de"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clip=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"on"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_nothing</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#coord_trans(x="pseudo_log",y="pseudo_log",clip="on", xlim=c(-11,11),ylim=c(-7,7)) +</span></span>
<span id="cb2-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="entering-the-world-of-distortion" class="level3">
<h3 class="anchored" data-anchor-id="entering-the-world-of-distortion">Entering the World of Distortion</h3>
<section id="pseudo-log-transformation" class="level4">
<h4 class="anchored" data-anchor-id="pseudo-log-transformation">Pseudo-Log Transformation</h4>
<p>Warping begins with using <code>pseudo_log</code> transformation with <a href="https://ggplot2-book.org/coord#transformations-with-coord_trans"><code>coord_trans</code></a> creates an intriguing distortion:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>y,idx, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(r)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_circle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x0=</span>x,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y0=</span>y,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>r_var),</span>
<span id="cb3-5">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fffff3de"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#coord_fixed(clip="on", xlim=c(-11,11),ylim=c(-7,7)) +</span></span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_nothing</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pseudo_log"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pseudo_log"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clip=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"on"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="custom-fisheye-transformation" class="level4">
<h4 class="anchored" data-anchor-id="custom-fisheye-transformation">Custom Fisheye Transformation</h4>
<p>Inspired by radial distortion formula, I‚Äôve attempt to write a custom fisheye transformation.</p>
<p>k controls the intensity of the distortion.</p>
<ul>
<li>Positive k = Barrel Distortion (like Fisheye)</li>
<li>Negative k = Pincusion Distortion (Inverse Fisheye).</li>
<li>r‚Äô is pronouced as ‚Äúr prime‚Äù <img src="https://latex.codecogs.com/png.latex?%0Ar%E2%80%B2=r%E2%8B%85(1+k*r%5E2)%0A"> Here‚Äôs the implementation:</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(scales)</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define a fisheye transformation using trans_new</span></span>
<span id="cb4-4">fisheye_trans <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>) {</span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">trans_new</span>(</span>
<span id="cb4-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fisheye"</span>,</span>
<span id="cb4-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">transform =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(r) r <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> k <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> r<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Forward transformation</span></span>
<span id="cb4-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">inverse =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(r_prime) r_prime <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> k <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> r_prime<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Inverse transformation</span></span>
<span id="cb4-9">  )</span>
<span id="cb4-10">}</span>
<span id="cb4-11"></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the fisheye transformation object</span></span>
<span id="cb4-13">fisheye <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fisheye_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">k =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.03</span>)</span>
<span id="cb4-14"></span>
<span id="cb4-15">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>y,idx, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(r)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_circle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x0=</span>x,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y0=</span>y,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>r_var),</span>
<span id="cb4-19">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fffff3de"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-20">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#coord_fixed(clip="on", xlim=c(-11,11),ylim=c(-7,7)) +</span></span>
<span id="cb4-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_nothing</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-24">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#coord_trans(x="pseudo_log",y="pseudo_log",clip="on", xlim=c(-11,11),ylim=c(-7,7)) +</span></span>
<span id="cb4-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>fisheye, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>fisheye) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The result didn‚Äôt quite meet my expectations.. üòÖü•π, but it‚Äôs a start‚Ä¶!</p>
</section>
</section>
<section id="experimenting-with-modulus-transformation-in-scales-package" class="level3">
<h3 class="anchored" data-anchor-id="experimenting-with-modulus-transformation-in-scales-package">Experimenting with Modulus Transformation in <code>scales</code> package üì¶</h3>
<p>I also explored transformations like modulus, which yielded effects closer to the fish-eye look I envisioned:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define the modulus transformation with a specific parameter (e.g., p = 0.5)</span></span>
<span id="cb5-2">mod_trans_y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">modulus_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb5-3"></span>
<span id="cb5-4"></span>
<span id="cb5-5">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>y,idx, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(r)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_circle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x0=</span>x,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y0=</span>y,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>r_var),</span>
<span id="cb5-9">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fffff3de"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#coord_fixed(clip="on", xlim=c(-11,11),ylim=c(-7,7)) +</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_nothing</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>mod_trans_y ,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>mod_trans_y ,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clip=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"on"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">mod_trans_x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">modulus_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>)</span>
<span id="cb6-2">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>y,idx, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(r)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_circle</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x0=</span>x,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y0=</span>y,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span>r_var),</span>
<span id="cb6-6">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fffff3de"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-7">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#coord_fixed(clip="on", xlim=c(-11,11),ylim=c(-7,7)) +</span></span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_nothing</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors=</span>col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_trans</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span>mod_trans_x ,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y=</span>mod_trans_y ,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clip=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"on"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mm"</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/2024_12/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="final-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h3>
<p>Experimenting with warping in ggplot2 opens up a playful avenue for some quirky visualizations. I‚Äôm now thinking what to distort next!</p>


</section>

 ]]></description>
  <category>r</category>
  <category>ggplot</category>
  <guid>https://chichacha.github.io/chi-files/posts/2024_12/</guid>
  <pubDate>Sun, 22 Dec 2024 08:00:00 GMT</pubDate>
</item>
<item>
  <title>Creating a Seigaha Motif with ggplot2</title>
  <dc:creator>Chisato </dc:creator>
  <link>https://chichacha.github.io/chi-files/posts/post-with-code/</link>
  <description><![CDATA[ 





<section id="seigaiha-ÈùíÊµ∑Ê≥¢" class="level2">
<h2 class="anchored" data-anchor-id="seigaiha-ÈùíÊµ∑Ê≥¢">Seigaiha ÈùíÊµ∑Ê≥¢ üåä</h2>
<p>The Seigaiha (ÈùíÊµ∑Ê≥¢) motif, literally translated as ‚Äúblue ocean waves‚Äù is a classic Japanese pattern used in textiles, ceramics, kimono and art. It features stylized waves created with concentric circles forming arches. I just learned that it symbolizes surges of good luck - delightful and thought great start to have it for blog post.</p>
<ul>
<li>Èùí = Blue</li>
<li>Êµ∑ = Ocean</li>
<li>Ê≥¢ = Wave</li>
</ul>
<p>Using <code>ggplot2</code> and additional packages like <code>ggforce</code> and c<code>owplot,</code> I was able to recreate this timeless design programmatically.</p>
<section id="walk-through-of-how-i-created-the-pattern" class="level3">
<h3 class="anchored" data-anchor-id="walk-through-of-how-i-created-the-pattern">Walk Through of How I Created the Pattern</h3>
<p>First need to load up the required libraries. Recently, I discovered package called <a href="https://annotater.liomys.mx/"><code>annotater</code></a> , which let you add annotation to the packages you use in script! It‚Äôs such a useful tool - future me (and anyone collaborating on my code) will likely thank me for using it.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Easily Install and Load the 'Tidyverse' </span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggforce) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Accelerating 'ggplot2'   </span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(cowplot) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Streamlined Plot Theme and Plot Annotations for 'ggplot2'  </span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Easily Create Presentation-Ready Display Tables </span></span>
<span id="cb1-5"></span>
<span id="cb1-6">col10 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_split</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"012a4a-013a63-01497c-014f86-2a6f97-2c7da0-468faf-61a5c2-89c2d9-a9d6e5"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>)</span>
<span id="cb1-7"></span>
<span id="cb1-8">col10_pal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#"</span>,col10 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unlist</span>())</span></code></pre></div>
</details>
</div>
</section>
<section id="generating-the-grid-data" class="level3">
<h3 class="anchored" data-anchor-id="generating-the-grid-data">Generating the Grid Data</h3>
<p>We create a grid of coordinates to serve as the base for our motif. To archieve the characteristic offset of Seigaiha waves, we adjust the <code>x</code> coordinates for odd rows:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), </span>
<span id="cb2-2">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(y,x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y_odd=</span>(y<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">idx=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb2-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(y_odd,x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,x))</span></code></pre></div>
</details>
</div>
</section>
<section id="expanding-for-circle-sizes" class="level3">
<h3 class="anchored" data-anchor-id="expanding-for-circle-sizes">Expanding for Circle Sizes</h3>
<p>The radii of the circles vary in five steps. It could be smaller or larger. I could‚Äôve also add randomness to it too, but I just kept it constant for now.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">r_values <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb3-2">df_long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">expand_grid</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r=</span>r_values)</span>
<span id="cb3-3"></span>
<span id="cb3-4"></span>
<span id="cb3-5">df_long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r_var=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(idx<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(r),r))</span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#range(df_long$x)</span></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#range(df_long$y)</span></span>
<span id="cb3-10"></span>
<span id="cb3-11">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="drshbmwswg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#drshbmwswg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#drshbmwswg thead, #drshbmwswg tbody, #drshbmwswg tfoot, #drshbmwswg tr, #drshbmwswg td, #drshbmwswg th {
  border-style: none;
}

#drshbmwswg p {
  margin: 0;
  padding: 0;
}

#drshbmwswg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#drshbmwswg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#drshbmwswg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#drshbmwswg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#drshbmwswg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#drshbmwswg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#drshbmwswg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#drshbmwswg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#drshbmwswg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#drshbmwswg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#drshbmwswg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#drshbmwswg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#drshbmwswg .gt_spanner_row {
  border-bottom-style: hidden;
}

#drshbmwswg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#drshbmwswg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#drshbmwswg .gt_from_md > :first-child {
  margin-top: 0;
}

#drshbmwswg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#drshbmwswg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#drshbmwswg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#drshbmwswg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#drshbmwswg .gt_row_group_first td {
  border-top-width: 2px;
}

#drshbmwswg .gt_row_group_first th {
  border-top-width: 2px;
}

#drshbmwswg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#drshbmwswg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#drshbmwswg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#drshbmwswg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#drshbmwswg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#drshbmwswg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#drshbmwswg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#drshbmwswg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#drshbmwswg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#drshbmwswg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#drshbmwswg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#drshbmwswg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#drshbmwswg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#drshbmwswg .gt_left {
  text-align: left;
}

#drshbmwswg .gt_center {
  text-align: center;
}

#drshbmwswg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#drshbmwswg .gt_font_normal {
  font-weight: normal;
}

#drshbmwswg .gt_font_bold {
  font-weight: bold;
}

#drshbmwswg .gt_font_italic {
  font-style: italic;
}

#drshbmwswg .gt_super {
  font-size: 65%;
}

#drshbmwswg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#drshbmwswg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#drshbmwswg .gt_indent_1 {
  text-indent: 5px;
}

#drshbmwswg .gt_indent_2 {
  text-indent: 10px;
}

#drshbmwswg .gt_indent_3 {
  text-indent: 15px;
}

#drshbmwswg .gt_indent_4 {
  text-indent: 20px;
}

#drshbmwswg .gt_indent_5 {
  text-indent: 25px;
}

#drshbmwswg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#drshbmwswg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="x" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">x</th>
<th id="y" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">y</th>
<th id="y_odd" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">y_odd</th>
<th id="idx" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">idx</th>
<th id="r" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">r</th>
<th id="r_var" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">r_var</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="x">-16</td>
<td class="gt_row gt_right" headers="y">-10</td>
<td class="gt_row gt_center" headers="y_odd">FALSE</td>
<td class="gt_row gt_right" headers="idx">0</td>
<td class="gt_row gt_right" headers="r">0.3</td>
<td class="gt_row gt_right" headers="r_var">0.5477226</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="x">-16</td>
<td class="gt_row gt_right" headers="y">-10</td>
<td class="gt_row gt_center" headers="y_odd">FALSE</td>
<td class="gt_row gt_right" headers="idx">0</td>
<td class="gt_row gt_right" headers="r">0.5</td>
<td class="gt_row gt_right" headers="r_var">0.7071068</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="x">-16</td>
<td class="gt_row gt_right" headers="y">-10</td>
<td class="gt_row gt_center" headers="y_odd">FALSE</td>
<td class="gt_row gt_right" headers="idx">0</td>
<td class="gt_row gt_right" headers="r">0.7</td>
<td class="gt_row gt_right" headers="r_var">0.8366600</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="x">-16</td>
<td class="gt_row gt_right" headers="y">-10</td>
<td class="gt_row gt_center" headers="y_odd">FALSE</td>
<td class="gt_row gt_right" headers="idx">0</td>
<td class="gt_row gt_right" headers="r">0.9</td>
<td class="gt_row gt_right" headers="r_var">0.9486833</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="x">-16</td>
<td class="gt_row gt_right" headers="y">-10</td>
<td class="gt_row gt_center" headers="y_odd">FALSE</td>
<td class="gt_row gt_right" headers="idx">0</td>
<td class="gt_row gt_right" headers="r">1.1</td>
<td class="gt_row gt_right" headers="r_var">1.0488088</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="x">-14</td>
<td class="gt_row gt_right" headers="y">-10</td>
<td class="gt_row gt_center" headers="y_odd">FALSE</td>
<td class="gt_row gt_right" headers="idx">1</td>
<td class="gt_row gt_right" headers="r">0.3</td>
<td class="gt_row gt_right" headers="r_var">0.3000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="plotting-the-seigaiha-motif" class="level3">
<h3 class="anchored" data-anchor-id="plotting-the-seigaiha-motif">Plotting the Seigaiha Motif</h3>
<p>Using <code>geom_circle</code> from <code>ggforce</code>, we layer circles over the grid. We map the fill colour to the adjusted radius (r_var) for a slight gradeient effect:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">df_long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>y, idx, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(r)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_circle</span>(</span>
<span id="cb4-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb4-6">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x0 =</span> x,</span>
<span id="cb4-7">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y0 =</span> y,</span>
<span id="cb4-8">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">r =</span> r,</span>
<span id="cb4-9">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> r_var <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## just wanted to give bit of variance</span></span>
<span id="cb4-10">    ),</span>
<span id="cb4-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,</span>
<span id="cb4-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fffff3de"</span>,</span>
<span id="cb4-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb4-14">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_fixed</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">clip =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"on"</span>,</span>
<span id="cb4-16">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">14.5</span>),</span>
<span id="cb4-17">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_nothing</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors =</span> col10_pal) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_gradientn</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors =</span> col10_pal)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chichacha.github.io/chi-files/posts/post-with-code/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="final-touch" class="level3">
<h3 class="anchored" data-anchor-id="final-touch">Final Touch</h3>
<p>The <code>theme_nothing()</code> from <code>cowplot</code> removes all unnecessary visual elements (axes, labels etc.), leaving only the motif. I‚Äôve adjusted <code>xlim</code> and <code>ylim</code> so that I‚Äôm clipping out the extra circles.</p>


</section>
</section>

 ]]></description>
  <category>r</category>
  <category>ggplot</category>
  <guid>https://chichacha.github.io/chi-files/posts/post-with-code/</guid>
  <pubDate>Sat, 21 Dec 2024 08:00:00 GMT</pubDate>
</item>
</channel>
</rss>
